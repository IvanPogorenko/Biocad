import{a as A,b as j,c as D,d as B,e as L,f as z}from"./chunk-MHIJXXAX.js";import{a as R}from"./chunk-2E43XGWA.js";import{c as u}from"./chunk-YJ4EFK5Q.js";import{a as F}from"./chunk-5IY4WAA2.js";import{Da as M,G as C,H as I,Ha as P,Ia as w,Ma as b,N as O,P as s,Q as r,V as y,W as _,X as o,Y as n,Z as l,ba as p,da as E,g,ha as c,i as v,ia as k,k as h,pa as x,r as S,u as d,y as T}from"./chunk-CPOFFJ7Z.js";import"./chunk-FDERIQAA.js";var m=class a{constructor(e,i){this._httpClient=e;this._store=i}getTaskExtends(e){this._store.dispatch(B()),this._httpClient.get(`/task-extended-info/${e}`).pipe(h(i=>{let t=i.message||"Failed to load tasks";return this._store.dispatch(z({error:t})),g(()=>new Error(t))})).subscribe({next:i=>{this._store.dispatch(L({task:i}))}})}static \u0275fac=function(i){return new(i||a)(d(M),d(u))};static \u0275prov=S({token:a,factory:a.\u0275fac,providedIn:"root"})};var H=class a{constructor(e,i,t,f){this._taskInfoService=e;this._routingService=i;this._activatedRoute=t;this._store=f}task=null;loading=!1;error=null;tabs={analytics:b.Analytics,describe:b.Describe};activeTab=this.tabs.describe;_taskId=-1;routeSub;storeSub;ngOnInit(){this.routeSub=this._activatedRoute.params.subscribe(e=>{this._taskId=e.id}),this._taskId>0&&(this.subscribeToStore(),this._taskInfoService.getTaskExtends(this._taskId))}subscribeToStore(){this.storeSub=v([this._store.select(A),this._store.select(j),this._store.select(D)]).subscribe(([e,i,t])=>{this.task=e,this.loading=i,this.error=t,t&&console.error("Error from store in task-info:",t)})}ngOnDestroy(){this.routeSub&&this.routeSub.unsubscribe(),this.storeSub&&this.storeSub.unsubscribe()}swapTabs(e){e===this.tabs.analytics?this._routingService.navigateToTaskAnalytics(this._taskId):this._routingService.navigateToTaskDescribe(this._taskId),this.swapActiveBtn(e)}swapActiveBtn(e){this.activeTab=e}statusChanged(e){}static \u0275fac=function(i){return new(i||a)(r(m),r(F),r(P),r(u))};static \u0275cmp=T({type:a,selectors:[["app-task-info"]],standalone:!0,features:[x],decls:21,vars:8,consts:[[1,"task-info"],[1,"container","task-info__container"],[1,"task-info__header"],[1,"task-info__title"],["alt","icon",3,"src"],[1,"task-info__title-info"],[1,"task-info__name"],[1,"task-info__id"],[1,"task-info__action"],[1,"task-info__select",3,"changedOption","selectedOption"],["width","24","height","24","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg"],["stroke","#EE3F44","fill-rule","evenodd","clip-rule","evenodd","d","M12 21.35L10.55 20.03C5.4 15.36 2 12.28 2 8.5C2 5.42 4.42 3 7.5 3C9.24 3 10.91 3.81 12 5.09C13.09 3.81 14.76 3 16.5 3C19.58 3 22 5.42 22 8.5C22 12.28 18.6 15.36 13.45 20.04L12 21.35Z","fill","none"],[1,"task-info__navigation"],["type","button",1,"button","task-info__button",3,"click"],[1,"task-info__separator"]],template:function(i,t){i&1&&(o(0,"main",0)(1,"div",1)(2,"div",2)(3,"div",3),l(4,"img",4),o(5,"div",5)(6,"h1",6),c(7),n(),o(8,"h2",7),c(9),n()()(),o(10,"div",8)(11,"app-select",9),p("changedOption",function(N){return t.statusChanged(N)}),n(),C(),o(12,"svg",10),l(13,"path",11),n()()(),I(),o(14,"nav",12)(15,"button",13),p("click",function(){return t.swapTabs(t.tabs.analytics)}),c(16,"\u0410\u043D\u0430\u043B\u0438\u0442\u0438\u043A\u0430"),n(),o(17,"button",13),p("click",function(){return t.swapTabs(t.tabs.describe)}),c(18,"\u041E\u043F\u0438\u0441\u0430\u043D\u0438\u0435"),n()(),l(19,"hr",14),n(),l(20,"router-outlet"),n()),i&2&&(s(4),E("src",t.task==null||t.task.task==null?null:t.task.task.icon,O),s(3),k(t.task==null||t.task.task==null?null:t.task.task.name),s(2),k(t.task==null||t.task.task==null?null:t.task.task.number),s(2),y("selectedOption",(t.task==null||t.task.task==null?null:t.task.task.status)||""),s(4),_("task-info__button_active",t.activeTab===t.tabs.analytics),s(2),_("task-info__button_active",t.activeTab===t.tabs.describe))},dependencies:[R,w],styles:["html[_ngcontent-%COMP%]{font-family:Roboto,sans-serif;font-size:16px;line-height:1rem}.task-info[_ngcontent-%COMP%]{padding:32px 24px}.task-info__container[_ngcontent-%COMP%]{padding:16px 20px 16px 16px;background-color:#fff}.task-info__header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.task-info__title[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.task-info__title-info[_ngcontent-%COMP%]{margin-left:16px}.task-info__name[_ngcontent-%COMP%]{font-size:1.25rem;line-height:1.5rem;color:#000000de}.task-info__id[_ngcontent-%COMP%]{font-size:.75rem;color:#0009}.task-info__action[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.task-info__select[_ngcontent-%COMP%]{margin-right:20px}.task-info__navigation[_ngcontent-%COMP%]{margin-top:16px}.task-info__button[_ngcontent-%COMP%]{padding:16px;text-transform:uppercase;font-size:.875rem;color:#0009;background-color:transparent}.task-info__button[_ngcontent-%COMP%]:first-child{padding-left:0}.task-info__button_active[_ngcontent-%COMP%]{color:#23b04a;border-bottom:1px solid #23B04A}.task-info__separator[_ngcontent-%COMP%]{margin:0 -20px 0 -16px;background-color:#21212114}"]})};export{H as TaskInfoComponent};
