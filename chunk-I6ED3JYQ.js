import{a as z,b as N,c as R}from"./chunk-4OKPEWU3.js";import{a as L}from"./chunk-2E43XGWA.js";import{c as k,d as h,e as Z}from"./chunk-YJ4EFK5Q.js";import{a as $}from"./chunk-5IY4WAA2.js";import{$ as E,Aa as D,Ca as F,Da as V,G as f,H as _,N as M,P as s,Q as p,U as O,V as m,X as e,Y as i,Z as o,_ as I,ba as S,da as P,g as T,ha as c,ia as l,k as w,pa as g,qa as H,r as y,ra as j,u as b,y as d}from"./chunk-CPOFFJ7Z.js";import"./chunk-FDERIQAA.js";var C=class a{constructor(n){this._routingService=n}task;statusChanged(n){console.log(n)}toTaskInfo(n){n.target.closest("app-select")||this._routingService.navigateToTask(this.task.id)}static \u0275fac=function(t){return new(t||a)(p($))};static \u0275cmp=d({type:a,selectors:[["app-task-card"]],inputs:{task:"task"},standalone:!0,features:[g],decls:34,vars:7,consts:[[1,"task-card",3,"click"],[1,"task-card__icon"],["alt","task icon",1,"task-card__img",3,"src"],[1,"task-card__info"],[1,"task-card__title"],[1,"task-card__id"],[3,"changedOption","selectedOption"],[1,"task-card__name"],[1,"task-card__location"],["width","11","height","14","viewBox","0 0 11 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M5.33333 6.5C5.65556 6.5 5.93056 6.38611 6.15833 6.15833C6.38611 5.93056 6.5 5.65556 6.5 5.33333C6.5 5.01111 6.38611 4.73611 6.15833 4.50833C5.93056 4.28056 5.65556 4.16667 5.33333 4.16667C5.01111 4.16667 4.73611 4.28056 4.50833 4.50833C4.28056 4.73611 4.16667 5.01111 4.16667 5.33333C4.16667 5.65556 4.28056 5.93056 4.50833 6.15833C4.73611 6.38611 5.01111 6.5 5.33333 6.5ZM5.33333 12.0167C6.81111 10.6722 7.90278 9.45278 8.60833 8.35833C9.31389 7.26389 9.66667 6.3 9.66667 5.46667C9.66667 4.15556 9.24722 3.08333 8.40833 2.25C7.56944 1.41667 6.54444 1 5.33333 1C4.12222 1 3.09722 1.41667 2.25833 2.25C1.41944 3.08333 1 4.15556 1 5.46667C1 6.3 1.36111 7.26389 2.08333 8.35833C2.80556 9.45278 3.88889 10.6722 5.33333 12.0167ZM5.33333 13.3333C3.54444 11.8111 2.20833 10.3972 1.325 9.09167C0.441667 7.78611 0 6.57778 0 5.46667C0 3.8 0.536111 2.47222 1.60833 1.48333C2.68056 0.494444 3.92222 0 5.33333 0C6.74444 0 7.98611 0.494444 9.05833 1.48333C10.1306 2.47222 10.6667 3.8 10.6667 5.46667C10.6667 6.57778 10.225 7.78611 9.34167 9.09167C8.45833 10.3972 7.12222 11.8111 5.33333 13.3333Z","fill","black","fill-opacity","0.38"],[1,"task-card__room"],[1,"task-card__additional"],[1,"task-card__warnings"],["width","16","height","16","viewBox","0 0 16 16","fill","none","xmlns","http://www.w3.org/2000/svg"],["clip-path","url(#clip0_501_109)"],["d","M8 1.33333C4.32 1.33333 1.33333 4.32 1.33333 8C1.33333 11.68 4.32 14.6667 8 14.6667C11.68 14.6667 14.6667 11.68 14.6667 8C14.6667 4.32 11.68 1.33333 8 1.33333ZM9.00032 11.0013H7.00032V10H9.00032V11.0013ZM9.00032 9.0013H7.00032V5.0013H9.00032V9.0013Z","fill","black","fill-opacity","0.12"],["id","clip0_501_109"],["width","16","height","16","fill","white"],[1,"task-card__warnings-count"],[1,"task-card__alarms"],["clip-path","url(#clip0_501_114)"],["d","M0.666656 14H15.3333L7.99999 1.33333L0.666656 14ZM8.99966 12H6.99966V11.0013H8.99966V12ZM8.99966 9.49995H6.99966V6.0013H8.99966V9.49995Z","fill","black","fill-opacity","0.12"],["id","clip0_501_114"],[1,"task-card__alarms-count"]],template:function(t,r){t&1&&(e(0,"div",0),S("click",function(v){return r.toTaskInfo(v)}),e(1,"div",1),o(2,"img",2),i(),e(3,"div",3)(4,"div",4)(5,"p",5),c(6),i(),e(7,"app-select",6),S("changedOption",function(v){return r.statusChanged(v)}),i()(),e(8,"h2",7),c(9),i(),e(10,"div",8),f(),e(11,"svg",9),o(12,"path",10),i(),_(),e(13,"span",11),c(14),i()(),e(15,"div",12)(16,"div",13),f(),e(17,"svg",14)(18,"g",15),o(19,"path",16),i(),e(20,"defs")(21,"clipPath",17),o(22,"rect",18),i()()(),_(),e(23,"span",19),c(24),i()(),e(25,"div",20),f(),e(26,"svg",14)(27,"g",21),o(28,"path",22),i(),e(29,"defs")(30,"clipPath",23),o(31,"rect",18),i()()(),_(),e(32,"span",24),c(33),i()()()()()),t&2&&(s(2),P("src",r.task.icon,M),s(4),l(r.task.number),s(),m("selectedOption",r.task.status),s(2),l(r.task.name),s(5),l(r.task.location),s(10),l(r.task.warnings),s(9),l(r.task.alerts))},dependencies:[L],styles:["html[_ngcontent-%COMP%]{font-family:Roboto,sans-serif;font-size:16px;line-height:1rem}.task-card[_ngcontent-%COMP%]{padding:16px;border-radius:16px;border:1px solid rgba(0,0,0,.12);width:296px;display:flex;justify-content:space-between;align-items:center;background-color:#fff;cursor:pointer}.task-card__icon[_ngcontent-%COMP%]{width:40px;height:40px}.task-card__img[_ngcontent-%COMP%]{width:100%;height:100%;object-position:center;object-fit:cover}.task-card__title[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:4px}.task-card__id[_ngcontent-%COMP%]{font-size:.75rem;color:#00000061}.task-card__name[_ngcontent-%COMP%]{margin-bottom:4px;font-size:.75rem;color:#000000de;overflow:hidden;text-overflow:ellipsis;max-width:212px;white-space:nowrap}.task-card__location[_ngcontent-%COMP%]{margin-bottom:4px;font-size:.75rem;color:#00000061;display:flex;align-items:center;justify-content:center;justify-self:left}.task-card__room[_ngcontent-%COMP%]{margin-left:4px}.task-card__additional[_ngcontent-%COMP%]{font-size:.75rem;color:#00000061;display:flex;justify-content:space-between;align-items:center;width:80px;margin-left:auto}.task-card__warnings[_ngcontent-%COMP%], .task-card__alarms[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.task-card__warnings-count[_ngcontent-%COMP%], .task-card__alarms-count[_ngcontent-%COMP%]{margin-left:4px}"]})};var x=Z("tasks"),B=h(x,a=>a.tasks),G=h(x,a=>a.loading),U=h(x,a=>a.error);var u=class a{constructor(n,t){this._httpClient=n;this._store=t}getTasks(){this._store.dispatch(z()),this._httpClient.get("/tasks").pipe(w(n=>{let t=n.message||"Failed to load tasks";return this._store.dispatch(R({error:t})),T(()=>new Error(t))})).subscribe({next:n=>{this._store.dispatch(N({tasks:n}))}})}static \u0275fac=function(t){return new(t||a)(b(V),b(k))};static \u0275prov=y({token:a,factory:a.\u0275fac,providedIn:"root"})};function X(a,n){if(a&1&&(I(0),o(1,"app-task-card",3),E()),a&2){let t=n.$implicit;s(),m("task",t)}}var q=class a{constructor(n,t){this._dashboardService=n;this._store=t;this.tasks$=this._store.select(B),this.loading$=this._store.select(G),this.error$=this._store.select(U)}tasks$;loading$;error$;ngOnInit(){this._dashboardService.getTasks()}static \u0275fac=function(t){return new(t||a)(p(u),p(k))};static \u0275cmp=d({type:a,selectors:[["app-dashboards"]],standalone:!0,features:[g],decls:4,vars:3,consts:[[1,"dashboards"],[1,"container","dashboards__container"],[4,"ngFor","ngForOf"],[3,"task"]],template:function(t,r){t&1&&(e(0,"main",0)(1,"div",1),O(2,X,2,1,"ng-container",2),H(3,"async"),i()()),t&2&&(s(2),m("ngForOf",j(3,1,r.tasks$)))},dependencies:[C,D,F],styles:[".dashboards__container[_ngcontent-%COMP%]{margin-top:8px;display:grid;gap:24px;grid-template-columns:repeat(auto-fill,minmax(292px,1fr));width:100%}"]})};export{q as DashboardsComponent};
